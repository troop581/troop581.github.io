"use strict";var app=angular.module("app",["ngRoute","ngSanitize","ui.bootstrap"]);app.config(["$tooltipProvider","$routeProvider","$httpProvider",function(n,t,i){n.options({popupDelay:500});i.defaults.withCredentials=!0;t.when("/flags",{templateUrl:"app/modules/flags.html",resolve:{dataService:function(n){return n.init()}}}).otherwise({redirectTo:"/flags"})}]);app.run(["$route",function(){}]);toastr.options={closeButton:!1,debug:!1,positionClass:"toast-bottom-left",onclick:null,showDuration:"4000",hideDuration:"1000",timeOut:"4000",extendedTimeOut:"1000",showEasing:"linear",hideEasing:"linear",showMethod:"show",hideMethod:"hide"};app.controller("flags",["dataService","$q","$modal",function(n,t,i){function e(n,t,i,r){var u=moment().year(r).month(i).date(1).hours(0).minutes(0).seconds(0).milliseconds(0);if(n===-1)for(u.endOf("month").startOf("day");u.day()!==t;)u.subtract(1,"day");else for(u.date((n-1)*7+1);u.day()!==t;)u.add(1,"day");return u}var r=this;r.data=n;var u=2015,f=1,o=2;return r.holidays=[{text:"Memorial Day",date:e(-1,f,4,u)},{text:"Flag Day",date:moment(u+"-06-14")},{text:"Independence Day",date:moment(u+"-07-04")},{text:"Patriot Day",date:moment(u+"-09-11")},{text:"Columbus Day",date:e(o,f,9,u)},{text:"Veterans Day",date:moment(u+"-11-11")},{text:"Martin Luther King, Jr. Day",date:e(o,f,0,u+1)},{text:"Presidents' Day",date:e(3,f,1,u+1)}],r.donate=function(){if(toastr.clear(),!n.subscribe&&!n.donate){toastr.warning("","You have not selected the flag service or a donation.",{timeOut:0});return}if(!n.name||!n.address||!n.phone){toastr.warning("","Please fill in all required fields.",{timeOut:0});return}if(!!n.donation&&(!_.isFinite(n.donation)||parseFloat(n.donation)<0)){toastr.warning("","Please check your donation amount. It doesn't appear to be correct.",{timeOut:0});return}if(n.subscribe&&r.getTotal()<40){toastr.error("","An error occurred. Please fix the data and try again.",{timeOut:0});return}r.getTotal()<5&&toastr.warning("","$5.00 is the minimum amount we can process through PayPal.",{timeOut:0})},r.getDonation=function(){return _.isFinite(n.donation)?parseFloat(n.donation)<0?0:parseFloat(n.donation):0},r.getTotal=function(){var t=0;return n.subscribe&&(t=t+40),n.donate&&(t=t+r.getDonation()),t},r.showBoundaries=function(){var n=i.open({templateUrl:"app/modules/flags.boundaries.html",controller:"flags.boundaries as vm",size:"lg"});n.result.then(function(){},function(){})},function(){}(),r}]);app.controller("flags.boundaries",["dataService","$modalInstance","$q",function(n,t){var i=this;return i.data=n,i.close=function(){t.close()},function(){}(),i}]);app.controller("header",["$location","dataService",function(n,t){var i=this;return i.data=t,i.location=n,i}]);app.controller("shell",["$location","$modal","dataService",function(n,t,i){var r=this;return r.data=i,r.isActive=function(t){return t===n.path().substr(0,t.length)},r.openSettings=function(){var n=t.open({templateUrl:"app/modules/settings.html",controller:"settings as vm"});n.result.then(function(){},function(){})},r}]);app.factory("dataService",["$http","$filter","$q",function(){var n={};return n.donationStatus="subscribe",n.init=function(){n.initialized},n}]);app.directive("dropTarget",function(){return{restrict:"A",scope:{drop:"&"},link:function(n,t){var i=0;t.bind("dragover",function(n){n.preventDefault&&n.preventDefault();n.stopPropogation&&n.stopPropogation();n.originalEvent.dataTransfer.dropEffect="copy"});t.bind("dragenter",function(n){i++;n.preventDefault&&n.preventDefault();n.stopPropogation&&n.stopPropogation();n.originalEvent.dataTransfer.dropEffect="copy";angular.element(n.currentTarget).addClass("alert-success");angular.element(n.currentTarget).removeClass("alert-info")});t.bind("dragleave",function(n){i--;i===0&&(angular.element(n.currentTarget).addClass("alert-info"),angular.element(n.currentTarget).removeClass("alert-success"));n.preventDefault&&n.preventDefault();n.stopPropogation&&n.stopPropogation();n.originalEvent.dataTransfer.dropEffect="copy"});t.bind("drop",function(t){t.preventDefault&&t.preventDefault();t.stopPropogation&&t.stopPropogation();angular.element(t.currentTarget).addClass("alert-info");angular.element(t.currentTarget).removeClass("alert-success");var i=t.originalEvent.dataTransfer.files;n.$apply(function(){n.drop({files:i})})})}}});app.directive("floatThead",function(){return{restrict:"A",link:function(n,t){$(t).floatThead()}}});app.filter("momentToString",["$filter","$locale",function(){return function(n,t){return moment.isMoment(n)?n.format(t):""}}]);app.filter("porgSite",["$filter",function(){return function(n,t){var i=[];return _.forEach(n,function(n){(t==="all"||n.parentPOrg===t)&&i.push(n)}),i}}]);
/*
//# sourceMappingURL=scripts.min.js.map
*/