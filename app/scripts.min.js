"use strict";var app=angular.module("app",["ngRoute","ngSanitize","ui.bootstrap"]);app.config(["$tooltipProvider","$routeProvider","$httpProvider",function(n,t,i){n.options({popupDelay:500});i.defaults.withCredentials=!0;t.when("/flags",{templateUrl:"app/modules/flags.html",resolve:{dataService:function(n){return n.init()}}}).when("/calendar",{templateUrl:"app/modules/calendar.html",resolve:{dataService:function(n){return n.init()}}}).otherwise({redirectTo:"/flags"})}]);app.run(["$route",function(){}]);toastr.options={closeButton:!1,debug:!1,positionClass:"toast-bottom-left",onclick:null,showDuration:"4000",hideDuration:"1000",timeOut:"4000",extendedTimeOut:"1000",showEasing:"linear",hideEasing:"linear",showMethod:"show",hideMethod:"hide"};app.controller("calendar",["dataService","$q",function(n){var t=this;return t.data=n,function(){}(),t}]);app.controller("flags",["dataService","$q","$modal","$timeout",function(n,t,i,r){function o(n,t,i,r){var u=moment().year(r).month(i).date(1).hours(0).minutes(0).seconds(0).milliseconds(0);if(n===-1)for(u.endOf("month").startOf("day");u.day()!==t;)u.subtract(1,"day");else for(u.date((n-1)*7+1);u.day()!==t;)u.add(1,"day");return u}var u=this;u.data=n;var f=2015,e=1,s=2;return u.holidays=[{text:"Memorial Day",date:o(-1,e,4,f)},{text:"Flag Day",date:moment(f+"-06-14")},{text:"Independence Day",date:moment(f+"-07-04")},{text:"Patriot Day",date:moment(f+"-09-11")},{text:"Columbus Day",date:o(s,e,9,f)},{text:"Veterans Day",date:moment(f+"-11-11")},{text:"Martin Luther King, Jr. Day",date:o(s,e,0,f+1)},{text:"Presidents' Day",date:o(3,e,1,f+1)}],u.donate=function(t){if(toastr.clear(),!n.subscribe&&!n.donate){toastr.warning("","You have not selected the flag service or a donation.");return}if(!n.name||!n.address||!n.phone){toastr.warning("","Please fill in all required fields.");return}if(!!n.donation&&(!_.isFinite(n.donation)||parseFloat(n.donation)<0)){toastr.warning("","Please check your donation amount. It doesn't appear to be correct.");return}if(n.subscribe&&u.getTotal()<40){toastr.error("","An error occurred. Please fix the data and try again.",{timeOut:0});return}if(u.getTotal()<5){toastr.warning("","$5.00 is the minimum amount we can process through PayPal.");return}toastr.info("","Processing donation...",{timeOut:0});r(function(){var n=angular.element(t.target);n.attr("action","https://www.paypal.com/cgi-bin/webscr");n.submit()},500)},u.getDescription=function(){return"2015 Flags"},u.getDonation=function(){return _.isFinite(n.donation)?parseFloat(n.donation)<0?0:parseFloat(n.donation):0},u.getTotal=function(){var t=0;return n.subscribe&&(t=t+40),n.donate&&(t=t+u.getDonation()),t},u.getValue=function(){return"39.99"},u.showBoundaries=function(){toastr.clear();var n=i.open({templateUrl:"app/modules/flags.boundaries.html",controller:"flags.boundaries as vm",size:"lg"});n.result.then(function(){},function(){})},function(){}(),u}]);app.controller("flags.boundaries",["dataService","$modalInstance","$q",function(n,t){var i=this;return i.data=n,i.close=function(){t.close()},function(){}(),i}]);app.controller("header",["$location","dataService",function(n,t){var i=this;return i.data=t,i.location=n,i}]);app.controller("shell",["$location","$modal","dataService",function(n,t,i){var r=this;return r.data=i,r.isActive=function(t){return t===n.path().substr(0,t.length)},r.openSettings=function(){var n=t.open({templateUrl:"app/modules/settings.html",controller:"settings as vm"});n.result.then(function(){},function(){})},r}]);app.factory("dataService",["$http","$filter","$q",function(n){var t={};return t.donationStatus="subscribe",t.processDonation=function(t){return n.get(t).then(function(n){return n})},t.init=function(){t.initialized},t}]);app.directive("dropTarget",function(){return{restrict:"A",scope:{drop:"&"},link:function(n,t){var i=0;t.bind("dragover",function(n){n.preventDefault&&n.preventDefault();n.stopPropogation&&n.stopPropogation();n.originalEvent.dataTransfer.dropEffect="copy"});t.bind("dragenter",function(n){i++;n.preventDefault&&n.preventDefault();n.stopPropogation&&n.stopPropogation();n.originalEvent.dataTransfer.dropEffect="copy";angular.element(n.currentTarget).addClass("alert-success");angular.element(n.currentTarget).removeClass("alert-info")});t.bind("dragleave",function(n){i--;i===0&&(angular.element(n.currentTarget).addClass("alert-info"),angular.element(n.currentTarget).removeClass("alert-success"));n.preventDefault&&n.preventDefault();n.stopPropogation&&n.stopPropogation();n.originalEvent.dataTransfer.dropEffect="copy"});t.bind("drop",function(t){t.preventDefault&&t.preventDefault();t.stopPropogation&&t.stopPropogation();angular.element(t.currentTarget).addClass("alert-info");angular.element(t.currentTarget).removeClass("alert-success");var i=t.originalEvent.dataTransfer.files;n.$apply(function(){n.drop({files:i})})})}}});app.directive("floatThead",function(){return{restrict:"A",link:function(n,t){$(t).floatThead()}}});app.filter("momentToString",["$filter","$locale",function(){return function(n,t){return moment.isMoment(n)?n.format(t):""}}]);app.filter("porgSite",["$filter",function(){return function(n,t){var i=[];return _.forEach(n,function(n){(t==="all"||n.parentPOrg===t)&&i.push(n)}),i}}]);
/*
//# sourceMappingURL=scripts.min.js.map
*/